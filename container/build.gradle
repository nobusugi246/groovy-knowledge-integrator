buildscript {
  repositories {
    jcenter()
    mavenCentral()
  }
  dependencies {
    classpath "org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}"
    classpath 'org.kordamp.gradle:stats-gradle-plugin:0.2.0'
    classpath 'com.github.ben-manes:gradle-versions-plugin:0.14.0'
    classpath "com.bertramlabs.plugins:asset-pipeline-gradle:${assetPipelineVersion}"
  }
}

apply plugin: 'org.kordamp.gradle.stats'
apply plugin: 'com.github.ben-manes.versions'
apply plugin: 'groovy'
apply plugin: 'eclipse'
apply plugin: 'idea'
apply plugin: 'org.springframework.boot'
apply plugin: 'com.bertramlabs.asset-pipeline'
apply plugin: 'codenarc'
apply plugin: 'jacoco'

version = '0.1.3'
jar.baseName = 'gki-container'

sourceCompatibility = 1.8
targetCompatibility = 1.8

repositories {
  jcenter()
  mavenCentral()
}

codenarc {
  toolVersion = "${codenarcVersion}"
  ignoreFailures = true
  configFile = file('../config/codenarc/codenarc.groovy')
  sourceSets = [project.sourceSets.main]
}

dependencies {
  compile "org.codehaus.groovy:groovy-all:${groovyVersion}"
  compile 'org.springframework.boot:spring-boot-starter-web'
  compile 'org.springframework.boot:spring-boot-starter-actuator'
  compile 'org.springframework.boot:spring-boot-starter-thymeleaf'
  compile 'org.springframework.boot:spring-boot-starter-data-jpa'
  compile 'org.springframework.boot:spring-boot-starter-data-rest'
  compile "com.bertramlabs.plugins:asset-pipeline-core:${assetPipelineVersion}"

  compile 'org.springframework.boot:spring-boot-devtools'

  compileOnly 'org.projectlombok:lombok'

  runtime 'org.flywaydb:flyway-core'
  runtime "com.h2database:h2:${H2Version}"
  runtime "com.bertramlabs.plugins:asset-pipeline-spring-boot:${assetPipelineVersion}"

  runtime 'org.jsoup:jsoup:1.10.2'

  compile 'org.springframework.boot:spring-boot-starter-test'
  compile "org.gebish:geb-spock:${gebSpockVersion}"
  compile 'org.seleniumhq.selenium:selenium-support'
  compile 'org.seleniumhq.selenium:htmlunit-driver'
  compile "com.codeborne:phantomjsdriver:${phantomJsDriverVersion}"
  compile 'org.spockframework:spock-core:1.1-groovy-2.4'
}

bootRun {
  jvmArgs('-Dspring.output.ansi.enabled=always')
}

assets {
  minifyJs = true
  minifyCss = true
  enableSourceMaps = true
}
